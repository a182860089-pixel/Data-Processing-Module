# 📷 图片压缩工具使用说明

## 🚀 快速开始

### 启动应用

```bash
cd smallimg
npm run dev
```

然后在浏览器中打开 http://localhost:5173

## 📸 支持的图片格式

### ✅ 输入格式（完全支持）

- **JPG/JPEG** - 最常见的图片格式
- **PNG** - 支持透明背景
- **BMP** - Windows位图
- **GIF** - 动图（会转换为静态图）
- **TIFF** - 高质量图片格式
- **WebP** - 现代图片格式

### 📤 输出格式

- **WebP** - 高质量、小体积的现代图片格式

## 🎯 三种上传方式

### 1️⃣ 点击上传

1. 点击上传区域
2. 在文件选择器中选择图片
3. 可以按住 Ctrl 或 Shift 选择多张图片
4. 点击"打开"

### 2️⃣ 拖拽上传

1. 打开文件管理器
2. 选择一张或多张图片
3. 拖拽到上传区域
4. 松开鼠标

### 3️⃣ 粘贴上传

1. 在任何地方复制图片（右键图片 -> 复制图片）
2. 在页面上按 `Ctrl+V`
3. 图片会自动开始处理

## 📊 处理结果说明

处理完成后,每张图片会显示:

```
📷 原始文件名.jpg
状态: 已完成

原始: 3840×2160 (2.5 MB)
处理后: 1920×1080 (450 KB)
压缩率: 82%

[预览] [下载]
```

### 信息解读

- **原始**: 原图的尺寸和文件大小
- **处理后**: 压缩后的尺寸和文件大小
- **压缩率**: 减小的百分比,越高表示压缩效果越好

## 🔍 预览功能

点击"预览"按钮可以:

- 查看处理后的图片
- 切换显示原图和处理后的对比
- 查看详细的尺寸和大小信息

## 💾 下载功能

点击"下载"按钮会:

- 自动下载处理后的 WebP 文件
- 文件名格式: `原始文件名.webp`
- 例如: `photo.jpg` → `photo.webp`

## ⚙️ 处理参数

### 自动缩放规则

- **最大尺寸**: 1920×1080
- **保持宽高比**: 自动计算,不会变形
- **示例**:
  - 3840×2160 → 1920×1080
  - 2000×1000 → 1920×960
  - 1000×1000 → 1000×1000 (不缩放)

### 压缩质量

- **WebP 质量**: 95 (0-100,95为高质量)
- **压缩方法**: method=6 (最高质量)
- **重采样算法**: Lanczos (最高质量)

## 📝 常见问题

### Q: 为什么我的图片没有被缩小?

A: 如果图片尺寸已经小于或等于 1920×1080,则不会进行缩放,只会转换格式和压缩。

### Q: 支持批量处理吗?

A: 是的!可以同时上传多张图片,系统会逐个处理。

### Q: 处理后的图片质量如何?

A: 使用 Lanczos 算法和 WebP 95 质量,可以在大幅减小文件大小的同时保持高质量。

### Q: 可以处理多大的图片?

A: 建议单个文件不超过 50MB。

### Q: 处理速度慢怎么办?

A: 
- 大图片处理需要时间,请耐心等待
- 使用 Web Worker 后台处理,不会卡住页面
- 可以看到实时进度条

### Q: 为什么输出是 WebP 格式?

A: WebP 是现代浏览器都支持的格式,相比 JPG/PNG:
- 文件更小(通常减小 30-80%)
- 质量更好
- 支持透明背景
- 加载更快

### Q: 如何在不支持 WebP 的地方使用?

A: 可以使用在线工具或图片查看器将 WebP 转换回 JPG/PNG。

## 🎨 使用技巧

### 批量处理照片

1. 选择文件夹中的所有照片
2. 拖拽到上传区域
3. 等待全部处理完成
4. 逐个点击下载,或使用浏览器的"全部下载"功能

### 快速压缩单张图片

1. 复制图片 (Ctrl+C)
2. 在页面上粘贴 (Ctrl+V)
3. 等待处理完成
4. 点击下载

### 对比压缩效果

1. 上传图片
2. 等待处理完成
3. 点击"预览"
4. 勾选"显示原图"来回切换对比

## 🛠️ 测试建议

### 测试不同格式

在 `testimgs` 文件夹中有各种测试图片,可以:

1. 上传 JPG 格式图片
2. 上传 PNG 格式图片
3. 上传大尺寸图片 (>1920×1080)
4. 上传小尺寸图片 (<1920×1080)
5. 批量上传多张图片

### 验证压缩效果

- 查看压缩率是否合理 (通常 50-90%)
- 预览图片质量是否满意
- 检查文件大小是否明显减小

## 📞 技术支持

如遇到问题:

1. 检查浏览器控制台是否有错误
2. 确认图片格式是否支持
3. 确认文件大小是否超过限制
4. 尝试刷新页面重新上传

## 🎯 最佳实践

### 推荐使用场景

✅ 网站图片优化
✅ 社交媒体分享
✅ 邮件附件
✅ 云存储节省空间
✅ 批量照片压缩

### 不推荐场景

❌ 需要保留原始质量的专业摄影
❌ 需要保留 EXIF 信息的照片
❌ 需要特定格式的场景

## 🚀 性能优化建议

- 单次上传建议不超过 20 张图片
- 大图片(>10MB)建议单独处理
- 处理过程中可以继续浏览网页
- 使用现代浏览器(Chrome, Edge, Firefox)获得最佳性能

